---
title: "An Introduction to cleanr"
author: "Andreas Dominik Cullmann"
date: 2016-11-24, 17:00:37
bibliography: biblio.bib
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
# 
Coding is an art, but most of the code we write is more or less dreadful.
Many tried to teach us how to write code less dreadful, be it implicitly as
@KR did,
be it explicitly as
@cc
did.

If you are concerned about your coding style, you will probably want to lint 
your codes with [lintr]( https://CRAN.R-project.org/package=lintr) or even 
reformat it using [formatR](https://CRAN.R-project.org/package=formatR).

This package tries to help you with your code`s layout:
it checks our code for files too long or wide, functions with too
many lines, too wide lines, too many arguments or nestings too deep.
Note that i&szlig;t's *not* a static code analyser like 
[lintr]( https://CRAN.R-project.org/package=lintr).


```{r, echo = FALSE}
cleanr::set_cleanr_options(reset = TRUE)
cleanr::set_cleanr_options(check_return = FALSE)

```
You can use \pkg{cleanr} to check all files in a directory:
```{r}
directory <- system.file("tests", "runit", package = "cleanr")
print(cleanr::check_directory(directory))
```
Okay, looks good.
\pkg{cleanr} is controlled by a list of options named "cleanr". You can retrieve 
it either via ```options("cleanr")``` or via a convenience function:
```{r}
cleanr::get_cleanr_options(flatten_list = FALSE)
```
You can change any of those options on the fly (leaving the options set 
                                                untouched). 
The real life
```{r, eval = FALSE}
cleanr::check_directory(directory, max_file_width = 79)
```
produces conditions that would stop this vignette from getting compiled, this is
why we here assert these conditions:

```{r}
print(tools::assertCondition(cleanr::check_directory(directory, 
                                                     max_file_width = 79), 
                             c("cleanr", "error",  "condition"))
)
```
You can reset options using the convenience function:
```{r}
cleanr::set_cleanr_options(max_file_width = 78, 
                           max_lines = 35,
                           max_lines_of_code = 25)
```
```{r}
print(tools::assertCondition(cleanr::check_directory(directory), 
                             c("cleanr", "error",  "condition"))
)
```

# References
